# NTTools

一只TelegramBot

### 环境

`JDK` >= 7 、 `Git` 、`MongoDB` 、`FFMpeg`、`Noto中文字体`

反向代理自己的域名到本地端口，然后在启动时输入。

### 部署

[在Centos7下部署NTT](./INSTALL.MD)

其他系统呢？不会 (逃

### Twitter 相关功能

认证账号 : /login (支持多账号)    
移除账号 : /logout  
设置默认账号 : /current  
导出认证 : /auth  

**高级登录**

使用自定义 Twitter APIKey 进行认证，也可以直接使用 APIKey 与 AccessToken 直接使用已有认证。

权限问题 : 这个 API 最好有写权限，否则无法使用NTT进行回复推文等操作，如果不需要这些，使用只读 API 也不是大问题。

这有什么用？ 可以看到的 : 在使用 NTT 发送的推文，会显示自定义的 API 的名字，而不是来自 "NTT"。无法看到的 : 可能会觉得更安全 (？

用法 :

/login <ApiKey> <ApiKeySec>

使用自定义API得到认证链接、接下来的步骤与使用NTT登录无异，打开链接授权应用并得到七位数的验证码，返回NTT填写完成认证。

/login <ApiKey> <ApiKeySec> <AccessToken> <AccessTokenSec>

使用API和已保存的认证登录，如果乃使用自己的API，可以在Twitter开发者的App界面直接取得 AccessToken ，而不用进行授权操作 : 这通常是为了开发者调试。

**关注者监听与账号更改监听**

监听设置 : /track

关注者监听 : 当有新关注者和失去关注者时通知你，并提示该账号的风险 : 例如锁推、关注者低、没发过推文等等...

账号更改监听 : 可以对关注者或关注中选择开启，当对方账号冻结、解冻、个人信息(头像、名称等) 改动时通知你。

隐藏账号更改 : 对BOT其他用户隐藏自己的账号更改。

**自动处理**

设置 : /auto

关注新关注者 : 当有用户关注你时 自动发送关注请求。  
屏蔽新关注的人的转推 : 当你新关注了一个人 自动开启隐藏对方的转推。  

**时间流**

/timeline [on|off] 开启 / 关闭

当你的时间线有新推文时发送给你。

**回复/转推通知**

使用/mention [on/off] 开关

当有对你的回复和转推时发送给你，包含快速操作按钮，也可以对推文直接回复。

**对用户快速操作**

/follow 关注用户  
/unfo 取消关注  
/mute 静音用户  
/unmute 取消静音  
/mute_rt 静音用户转推
/unmute_rt 取消静音转推
/block 屏蔽用户  
/unblock 取消屏蔽  

可以使用 /<命令> [用户ID|用户名|带@的用户名|用户链接|推文链接]

也可以不带参数直接对 关注者监听以及账号更改监听 发送的通知 和 推文 的发送者使用。

**单条推文存档/查看**

/status <推文ID/链接>

**推文视频 / GIF下载**

使用 /media <推文ID/链接>

BOT就会回复所有可用的下载链接

**列表导出** 

支持导出 关注中、关注者、静音、屏蔽列表 为官方的.csv格式

使用 /export

**发送推文与回复推文**

/update 进入发送模式

(如果对推文消息回复 /update 即引用这条推文)

输入文本更改推文内容

发送 贴纸、图片、视频 添加媒体内容 (最多四张图片、一个视频)

使用 /submit 立即发送  
使用 /timed <小时:分钟> [年-月-日 可选] [时区 默认+8 可选] 定时发送  
使用 /cancel 取消发送  

退出发送模式后 可以使用 /timed 管理定时推文
 
回复推文 : 可以直接对收到的推文消息回复内容

**推文存档与批量拉取**

/status [推文ID|推文链接]

将推文存档并显示、如果推文还存在则可以快速操作、直接回复。

/fetch [用户ID|用户名|带@的用户名|用户链接|推文链接] <--all>

拉取用户所有推文 如果不带 --all 参数则如果拉取中 检测到 连续五条 存在存档的推文 则停止。

**存档推文搜索**

/search <参数...> [文本]

from=[用户ID|...] : 筛选发推用户  
to=[用户ID|...] : 筛选对用户的回复  
reply=[推文ID] : 筛选对推文的回复  

start=[年-月-日/小时:分钟] : 筛选指定时间后的推文  
end=[...] : 筛选指定时间前的推文  
utc=8 : 设置时间的时差 默认北京时间  

regex : 启用正则表达式查询

media=true : 筛选有媒体的推文  
media=false : 筛选仅文本推文  

### 自定义BOT

BotToken可以当成TelegramBot登录的账号密码、需要在 t.me/BotFather 申请。

/newbot 创建BOT
/mybot 设置 / 删除BOT


创建转发私聊的BOT

转发私聊BOT将会把所有给BOT发送的信息转发给你、你可以在BOT里回复对方，起到匿名作用。

现在支持屏蔽和取消屏蔽了！

创建加群验证BOT

新用户只要发送喵(或者嘤)就可以通过验证，如果用户为无头像或可能存在异常，则需要经过二次验证，随机抽取一位算数题 或 中文验证码。

支持开启 删除加群退群消息

支持设置欢迎消息、仅保留最后一条欢迎消息

记录 : 

退群、验证错误、超时、验证成功

实例 : t.me/miao_join_captch_bot

### 群组功能

删除频道信息转发

/dcm [on|off] : 开启关闭

如果群组绑定了频道，则每条频道信息都会被转发到群组并置顶，使用此功能删除来自频道的信息。

自动回复沙雕内容

/reply [on|off] : 开启关闭

默认开启，使用腾讯AI并自定义了一些东西 (

**群组动作互动**

/action [on|off] : 开启关闭

默认开启，当对其他群组成员用 / 作为前缀并以非ascii字符开头时

显示 : <用户> : 自定义内容 ~

如果为对其他人的回复 则

显示 : <用户> [参数一] 了 <对方> ~

如果带有参数二 :

显示 : <用户> [参数一] <对方> [参数二] ~

**群组屏蔽恶俗**

/antiesu [on|off] 开启/关闭

使用激进的正则规则删除涉及恶俗语法的文本、涉及恶俗的贴纸包

群组屏蔽指定贴纸包

/banss [贴纸包名]

/unbanss [贴纸包名]

贴纸包名可以在贴纸链接查看 : 链接格式为 t.me/addstickers/<包名>

如果客户端无法导出链接、可以将贴纸发送给NTT、会输出贴纸详情。

也可以直接在群组对贴纸使用命令直接屏蔽。

### 其他功能

**导出贴纸**

将贴纸 发送 /转发 给BOT、会自动回复贴纸链接、文件ID等信息并发送贴纸图片。(可以用于导出贴纸给其他应用使用)
